<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>{{ if not .IsHome }}{{ .Title }} - {{ end }}{{ .Site.Title }}</title>

  {{- if eq .Kind "page" }}
  <meta name="description" content="{{ .Summary }}" />
  <meta
    name="author"
    content="{{ .Params.Author | default .Site.Author.name }}"
  />
  {{- else }}
  <meta name="description" content="{{ .Site.Params.description }}" />
  <meta name="author" content="{{ .Site.Author.name }}" />
  {{- end }}

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> 
  <link href="https://fonts.googleapis.com/css?family=Crimson+Text:400,700|Press+Start+2P" rel="stylesheet"> 
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans&family=Noto+Sans+JP&family=Noto+Sans+SC:wght@100;300;400&family=Noto+Serif&family=Noto+Serif+JP&family=Noto+Serif+SC&family=Source+Code+Pro" rel="stylesheet"> 

  {{- $slice := slice }}
  {{- $customCSS := resources.Get "scss/custom.scss" | resources.ToCSS }}
  {{- if $customCSS }}
  {{- $slice = $slice | append ($customCSS | resources.Minify) }}
  {{- end }}
  
  {{- $slice = $slice | append (resources.Get "scss/kagami.scss" | resources.ToCSS) }}
  {{- $slice = $slice | append (resources.Get "css/prism.css") }}
  {{- $bundleCSS := $slice | resources.Concat "bundle.css" }}
  {{- $bundleCSS = printf "%s?v=%d" $bundleCSS.RelPermalink now.Unix }}
  <link rel="stylesheet" href="{{ $bundleCSS | safeHTML }}" media="all">

  <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
  <link rel="icon" href="/favicon.ico" />

  {{- hugo.Generator }}

  {{- with .Permalink }}
  <link rel="canonical" href="{{ . }}">
  {{- end }}

  {{- range .AlternativeOutputFormats }}
  {{ printf `<link rel="%s" type="%s" href="%s" hreflang="%s">` .Rel .MediaType.Type .Permalink ($.Site.LanguageCode | default "en-us") | safeHTML }}
  {{- end }}

  {{- template "_internal/google_analytics_async.html" . }}
  {{- template "_internal/opengraph.html" . }}
</head>
